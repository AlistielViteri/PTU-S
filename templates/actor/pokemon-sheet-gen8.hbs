<form class="{{cssClass}} container-fluid" autocomplete="off">
  <div class="row justify-content-between h-100">
    <div class="col-sm-12" style="padding-left: unset;">
      <div style="
        width: 100%;
        height: 100%;
        display: block;
        position: absolute;
        z-index: 1;
        background: #C42835;
        clip-path: polygon(0 0, 52% 0, 22% 100%, 0% 100%);">
      </div><div style="
        width: 100%;
        height: 100%;
        display: block;
        position: absolute;
        z-index: 0;
        background: linear-gradient(45deg, #ECDBEB, #DFFFFE);
        clip-path: polygon(100% 0, 45% 0, 15% 100%, 100% 100%);">
      </div><div style="
        width: 100%;
        height: 100%;
        display: block;
        position: absolute;
        z-index: 2;
        background: #E33242;
        clip-path: polygon(0 0, 44% 0, 14% 100%, 0% 100%);">
      </div>
      <div class="panel gen8character h-100">
        <div class="sheet-body no-hd h-100">
          <div class="tab details stats h-100" data-group="primary" data-tab="stats">
            <!-- Stats Tab -->
            <div class="row justify-content-between p-2 h-100">
              <!-- Left Col -->
              <div class="col-sm-12 col-md-5">
                <div class="d-flex align-items-end flex-column h-100">
                  <!-- Stats -->
                  <div class="w-100 stats stat-block mb-2">
                    <div class="row no-gutters header">
                      <div class="col-sm-2 pt-2 pb-2 key stat-header">Stats</div>
                      <div class="col-sm-2 mt-2 mb-2">Base</div>
                      <div class="col-sm-2 mt-2 mb-2">Mod</div>
                      <div class="col-sm-2 mt-2 mb-2" style="font-size: 9px;">Level-Up</div>
                      <div class="col-sm-2 mt-2 mb-2">Stage</div>
                      <div class="col-sm-2 mt-2 mb-2">Total</div>
                    </div>
                    {{#each data.stats as |stat key|}}
                    <div class="row no-gutters {{key}}">
                      <div class="stats {{key}} col-sm-2 key {{natureCheck ../data.nature.value key}}">
                        <label for="data.stats.{{key}}.value" class="resource-label">{{key}}</label>
                      </div>
                      <div class="stats {{key}} base col-sm-2">
                        <input type="text" name="data.stats.{{key}}.value" value="{{stat.value}}" data-dtype="Number"
                          disabled />
                      </div>
                      <div class="stats {{key}} mod col-sm-2">
                        <input type="text" name="data.stats.{{key}}.mod" value="{{stat.mod}}" data-dtype="Number" />
                      </div>
                      <div class="stats {{key}} levelUp col-sm-2">
                        <input type="text" name="data.stats.{{key}}.levelUp" value="{{stat.levelUp}}" data-dtype="Number" />
                      </div>
                      <div class="stats stage stage col-sm-2">
                        {{#if (isdefined stat.stage)}}
                        <input type="text" name="data.stats.{{key}}.stage" value="{{stat.stage}}" data-dtype="Number" />
                        {{/if}}
                      </div>
                      <div class="stats {{key}} total col-sm-2">
                        <input type="text" name="data.stats.{{key}}.total" value="{{stat.total}}" data-dtype="Number"
                          disabled />
                      </div>
                    </div>
                    {{/each}}
                    {{#if data.levelUpPoints}}
                    <div class="row no-gutters levelUpPoints">
                      <div class="col-sm-8">
                        <label for="data.levelUpPoints" class="resource-label">Remaining Level-Up Points:</label>
                      </div>
                      <div class="col">
                        <input type="text" name="data.levelUpPoints" value="{{data.levelUpPoints}}" data-dtype="Number"
                          disabled />
                      </div>
                    </div>
                    {{/if}}
                  </div>

                  <!-- Abilities -->
                  <div class="swsh-box mt-auto w-100">
                    <div class="swsh-body" style="display: block;">
                      {{> item-display title="Abilities" type="ability" data=actor.abilities}}
                      {{!-- <ol class="inventory-list">
                        <li class="inventory-header flexrow">
                          <h3 class="item-name flexrow">Abilities</h3>
                          <div class="item-controls">
                            <a class="item-control item-create" title="Add ability" data-type="ability"><i
                                class="fas fa-plus-circle" style="margin-right: 3px;"></i><span
                                class="readable">Add</span></a>
                          </div>
                        </li>
                        <ol class="item-list">
                          {{#each actor.abilities as | ability |}}
                          <li class="item flexrow" data-item-id="{{ability._id}}">
                            <div class="item-name flexrow">
                              <h4 title="Toggle Info ({{ability.name}})" data-toggle="collapse"
                                data-target="#{{ability._id}}-collapse" aria-expanded="false"
                                aria-controls="{{ability._id}}-collapse">
                                <i class="fas fa-info-circle info-icon"></i>
                                {{ability.name}}
                              </h4>
                            </div>
                            <div class="item-controls" style="flex: 0 0 55px; justify-content: center; display:flex;">
                              <a class="item-control item-edit" title="Edit ability"><i class="fas fa-edit"></i></a>
                              <a class="item-control item-delete" title="Delete ability"><i class="fas fa-trash"></i></a>
                            </div>
                            {{#if ability.data.snippet}}
                              <div class="collapse in readable lh-16 item-summary" id="{{ability._id}}-collapse">
                                <p class="summary">{{{ability.data.snippet}}}</p>
                              </div>
                            {{else}}
                              {{#if (is true (getGameSetting "openByDefault"))}}
                                <div class="collapse in readable lh-16 item-summary" id="{{ability._id}}-collapse">
                                  <p class="summary">{{{ability.data.effect}}}</p>
                                </div>
                              {{else}}
                                <div class="collapse readable lh-16 item-summary" id="{{ability._id}}-collapse">
                                  <p class="summary">{{{ability.data.effect}}}</p>
                                </div>
                              {{/if}}
                            {{/if}}
                          </li>
                          {{/each}}
                        </ol>
                      </ol> --}}
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-sm-12 col-md-3 align-items-center align-self-center">
                <div class="avatar">
                    <img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}" />
                  </div>
              </div>

              <!-- Right Col -->
              <div class="col-sm-12 col-md-4">
                <div class="d-flex align-items-center flex-column h-100">
                  <div class="swsh-box mb-2">
                    <div class="swsh-header" style="align-items: unset;">
                      <label for="name" class="name-label"></label>
                      <input class="ml-2" name="name" type="text" value="{{actor.name}}" placeholder="Name" />
                    </div>
                    <div class="swsh-body row no-gutters">
                      <div class="options w-100 d-flex">
                        <label for="progressBar" class="hp"></label>
                        <div class="d-flex pt-1 pb-1" style="text-align: center;">
                          <input class="ml-1 mr-1" type="text" name="data.health.value" value="{{data.health.value}}"
                            data-dtype="Number" />
                          <span style="font-size: 20px;"> / </span>
                          <input class="ml-1" type="text" name="data.health.max" value="{{data.health.max}}" data-dtype="Number"
                            disabled />
                        </div>
                      </div>
                      <div class="options w-100 d-flex">
                        <div class="temp-hp"><label for="temp-hp">temp</label></div>
                        <div class="d-flex pt-1 pb-1" style="text-align: center;">
                          <input class="ml-1 mr-1" type="text" name="data.health.temp.value" value="{{data.health.temp.value}}" data-dtype="Number">
                          <span style="font-size: 20px;"> / </span>
                          <input class="ml-1" type="text" name="data.health.temp.max" value="{{data.health.temp.max}}" data-dtype="Number">
                        </div>
                      </div>
                      <div class="options w-100 pb-1 pt-1">
                        <div class="progress-bar p{{data.health.percent}}" id="progressBar"></div>
                      </div>
                    </div>
                  </div> 

                  <!-- Type Effectiveness -->
                  <div class="w-100 swsh-box mt-auto mb-auto">
                    <div class="swsh-header justify-content-center">
                      <h3>Typing</h3>
                    </div>
                    <div class="swsh-body mt-1 mb-1 justify-content-center">
                      <span class="type-img">{{{loadTypeImages data.typing}}}</span>
                    </div>
                    <!-- Resistances & Weaknesses -->
                    {{#if (gt data.effectiveness.Weakness.length 0) }}
                    <div class="swsh-header">
                      <h5>Weaknesses</h5>
                    </div>
                    <div class="swsh-body">
                      <ul class="effectiveness-table">
                      {{#each data.effectiveness.Weakness}}
                        {{#each this}}
                          <li><span class="type-img">{{{loadTypeImage @key}}}</span> <span class="ml-1">x{{this}}</span></li>
                        {{/each}}
                      {{/each}}
                      </ul>
                    </div>
                    {{/if}}
                    <!-- Hide regular effective moves, maybe make a setting later -->
                    {{#if (and (gt data.effectiveness.Normal.length 0) false)}}
                    <div class="swsh-header">
                      <h5>Normal</h5>
                    </div>
                    <div class="swsh-body">
                      <ul class="effectiveness-table">
                      {{#each data.effectiveness.Normal}}
                        {{#each this}}
                          <li><span class="type-img">{{{loadTypeImage @key}}}</span> <span class="ml-1">x{{this}}</span></li>
                        {{/each}}
                      {{/each}}
                      </ul>
                    </div>
                    {{/if}}
                    {{#if (gt data.effectiveness.Resistant.length 0) }}
                    <div class="swsh-header">
                      <h5>Resistances</h5>
                    </div>
                    <div class="swsh-body">
                      <ul class="effectiveness-table">
                      {{#each data.effectiveness.Resistant}}
                        {{#each this}}
                          <li><span class="type-img">{{{loadTypeImage @key}}}</span> <span class="ml-1">x{{this}}</span></li>
                        {{/each}}
                      {{/each}}
                      </ul>
                    </div>
                    {{/if}}
                    {{#if (gt data.effectiveness.Immune.length 0) }}
                    <div class="swsh-header">
                      <h5>Immunities</h5>
                    </div>
                    <div class="swsh-body">
                      <ul class="effectiveness-table">
                      {{#each data.effectiveness.Immune}}
                        {{#each this}}
                          <li><span class="type-img">{{{loadTypeImage @key}}}</span> <span class="ml-1">x{{this}}</span></li>
                        {{/each}}
                      {{/each}}
                      </ul>
                    </div>
                    {{/if}}
                  </div>    

                  <!-- Nature + Experience + Level + Item -->
                  <div class="w-100 level-box mt-2">
                    <div class="swsh-box" style="text-align: center; word-break: keep-all;">
                      <div class="swsh-header">
                        <div class="d-flex w-100 mt-1 mb-1 align-items-center justify-content-between">
                          <div class="col-sm-6">
                            <label for="data.level.exp">Experience:</label>
                          </div>
                          <div class="col-sm-5 d-flex align-items-center" style="flex-direction: row;">
                            <label for="data.level.current">Level:</label>
                            <input class="ml-2" type="text" name="data.level.current" value="{{data.level.current}}" data-dtype="Number"
                              disabled />
                          </div>
                        </div>
                      </div>
                      <div class="swsh-body">
                        <div class="options w-100 d-flex">
                          <div class="d-flex w-100 pt-1 pb-1" style="text-align: center;">
                            <input class="ml-1 mr-1" type="text" name="data.level.exp" value="{{data.level.exp}}"
                              data-dtype="Number" />
                            <span style="font-size: 20px;"> / </span>
                            <input class="ml-1" type="text" name="till-level-up" value="{{data.level.expTillNextLevel}}" data-dtype="Number"
                              disabled />
                          </div>
                        </div>
                        <div class="options w-100 pb-1 pt-1">
                          <div class="progress-bar p{{data.level.percent}}" id="progressBar"></div>
                        </div>
                      </div>
                      <div class="swsh-header">
                        <div class="d-flex w-100 mt-1 mb-1">
                          <div class="col-sm-6">
                            <label for="data.nature.value">Nature:</label>
                          </div>
                          <div class="col-sm-6">
                            <label for="data.heldItem">Item</label>
                          </div>
                        </div>
                      </div>
                      <div class="swsh-body">
                        <div class="d-flex w-100 mt-1 mb-1">
                          <div class="col-sm-6">
                            {{#select data.nature.value}}
                            <select name="data.nature.value">
                              {{#each natures as | nature key |}}
                              <option value="{{key}}">{{key}}</option>
                              {{/each}}
                            </select>
                            {{/select}}
                          </div>
                          <div class="col-sm-6">
                            <input id="heldItemInput" type="text" name="data.heldItem" value="{{data.heldItem}}" />
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        
          <!-- Moves Tab -->
          <div class="tab details moves h-100" data-group="primary" data-tab="moves">
            <!-- Moves -->
            <ol class="inventory-list">
              <li class="inventory-header flexrow" style="background: linear-gradient(45deg, #ffffffbb, #fff, #ffffffbb); border-radius: 5px;">
                <div class="item-name flexcol align-items-center align-self-center" style="flex: 0 0 12%; margin-left: 3%;">
                    <h4>Move</h4>
                </div>
                <div class="item-name flexcol align-items-center align-self-center" style="flex: 0 0 8%;">
                  <h4>Type</h4>
                </div>
                <div class="item-name flexcol align-items-center align-self-center" style="flex: 0 0 7%;">
                  <h4>Category</h4>
                </div>
                <div class="item-name flexcol align-items-center align-self-center" style="flex: 0 0 5%;">
                  <h4>DB</h4>
                </div>
                <div class="item-name flexcol align-items-center align-self-center" style="flex: 0 0 13%;">
                  <h4>Damage Roll</h4>
                </div>
                <div class="item-name flexcol align-items-center align-self-center" style="flex: 0 0 10%;">
                  <h4>Frequency</h4>
                </div>
                <div class="item-name flexcol align-items-center align-self-center" style="flex: 0 0 4%;">
                  <h4>AC</h4>
                </div>
                <div class="item-name flexcol align-items-center align-self-center" style="flex: 0 0 13%;">
                  <h4>Range</h4>
                </div>
                <div class="item-name flexcol align-items-center align-self-center" style="flex: 0 0 20%;"> 
                  <h4>Effect</h4>
                </div>
                <div class="item-controls flexcol" style="flex: 0 0 5%;">
                  <a class="item-control item-create" title="Add move" data-type="move"><i
                      class="fas fa-plus-circle" style="margin-right: 3px;"></i><span
                      class="readable">Add</span></a>
                </div>
              </li>
              <ol class="item-list">
                {{#each actor.moves as | move |}}
                <li class="item flexrow" data-item-id="{{move._id}}">
                  <div class="gen8move rollable" data-id="{{move._id}}"> 
                    <i class="fas fa-dice-d20" style="position:unset; flex: 0 0 3%;"></i>
                  </div>
                  <div class="item-name flexcol align-items-center align-self-center" style="flex: 0 0 12%;">
                    <h4> 
                      {{move.name}}
                    </h4>
                  </div>
                  <div class="item-name flexcol align-items-center align-self-center" style="flex: 0 0 8%;">
                    <span class="readable pokemon p8 tight">{{move.data.type}}</span>
                  </div>
                  <div class="item-name flexcol align-items-center align-self-center" style="flex: 0 0 7%;">
                    <span class="readable pokemon p8 tight">{{move.data.category}}</span>
                  </div>
                  <div class="item-name flexcol align-items-center align-self-center" style="flex: 0 0 5%;">
                    <span class="readable pokemon p8 tight">{{calcDb move.data}}</span>
                  </div>
                  <div class="item-name flexcol align-items-center align-self-center" style="flex: 0 0 13%;">
                    <span class="readable pokemon p8 tight">{{calcMoveDb ../data move.data true}}</span>
                  </div>
                  <div class="item-name flexcol align-items-center align-self-center" style="flex: 0 0 10%;">
                    <span class="readable pokemon p8 tight">{{move.data.frequency}}</span>
                  </div>
                  <div class="item-name flexcol align-items-center align-self-center" style="flex: 0 0 4%;">
                    <span class="readable pokemon p8 tight">{{move.data.ac}}</span>
                  </div>
                  <div class="item-name flexcol align-items-center align-self-center" style="flex: 0 0 13%;">
                    <span class="readable pokemon p8 tight">{{move.data.range}}</span>
                  </div>
                  <div class="item-name flexcol move-col" style="flex: 0 0 20%;">
                    <span class="move-effect">
                      {{#if move.data.snippet}}
                        <span class="show-until-hover readable pokemon p8 tight">{{move.data.snippet}}</span>
                        <span class="hide-until-hover readable pokemon p8 tight">{{move.data.effect}}</span>
                      {{else}}
                        <span class="readable pokemon p8 tight">{{move.data.effect}}</span>
                      {{/if}}
                    </span>
                  </div>
                  <div class="item-controls" style="flex: 0 0 5%; justify-content: center; display:flex;">
                    <a class="item-control item-edit" title="Edit move"><i class="fas fa-edit"></i></a>
                    <a class="item-control item-delete" title="Delete move"><i class="fas fa-trash"></i></a>
                  </div>
                </li>
                {{/each}}
              </ol>
            </ol>

            <!-- Inheritance List -->
          </div>

          <!-- Capabilities & Abilities Tab -->
          <div class="tab details feats" data-group="primary" data-tab="capability">
            <div class="row">
              <div class="col">
                <!-- Capabilities -->
                <div class="swsh-box mt-auto w-100">
                  <div class="swsh-header">
                    <h3 class="item-name flexrow">Capabilities</h3>
                  </div>
                  <div class="swsh-body readable w-100 align-items-center" style="white-space: nowrap;">
                    {{#each data.capabilities as |capability key|}}
                    {{#if (and (and (not key "Other") (not key "Naturewalk")) (gt capability 0))}}
                    <div class="col-sm-4 p11 mb-1">
                      <label for="data.capabilities.{{key}}">{{key}}:</label>
                    </div>
                    <div class="col-sm-2 mb-1" style="text-align: center;">
                      <input type="text" name="data.capabilities.{{key}}" value="{{capability}}" data-dtype="Number"
                        disabled />
                    </div>
                    {{/if}}
                    {{/each}}
                  </div>
                  {{#if data.capabilities.Naturewalk}}
                  <div class="swsh-body readable w-100 align-items-center">
                    <div class="col-sm-4 p11">
                      <label for="data.capabilities.Naturewalk">Naturewalk:</label>
                    </div>
                    <div class="col-sm-8" style="text-align: center;">
                      <input type="text" name="data.capabilities.Naturewalk" value="{{data.capabilities.Naturewalk}}"
                        data-dtype="Number" disabled />
                    </div>
                  </div>
                  {{/if}}

                  <!-- Other Capabilities -->
                  <div class="swsh-body w-100 mt-2" style="display: block;">
                    {{> item-display title="Other Capabilities" type="capability" data=actor.capabilities}}
                    {{!-- <ol class="inventory-list">
                      <li class="inventory-header flexrow">
                        <h3 class="item-name flexrow">Other Capabilities</h3>
                        <div class="item-controls">
                          <a class="item-control item-create" title="Add capability" data-type="capability"><i
                              class="fas fa-plus-circle" style="margin-right: 3px;"></i><span
                              class="readable">Add</span></a>
                        </div>
                      </li>
                      <ol class="item-list">
                        {{#each actor.capabilities as | capability |}}
                        <li class="item flexrow" data-item-id="{{capability._id}}">
                          <div class="item-name flexrow">
                            <h4 title="Toggle Info ({{capability.name}})" data-toggle="collapse"
                              data-target="#{{capability._id}}-collapse" aria-expanded="false"
                              aria-controls="{{capability._id}}-collapse">
                              <i class="fas fa-info-circle info-icon"></i>
                              {{capability.name}}
                            </h4>
                          </div>
                          <div class="item-controls" style="flex: 0 0 55px; justify-content: center; display:flex;">
                            <a class="item-control item-edit" title="Edit capability"><i class="fas fa-edit"></i></a>
                            <a class="item-control item-delete" title="Delete capability"><i class="fas fa-trash"></i></a>
                          </div>
                          {{#if capability.data.snippet}}
                            <div class="collapse in readable lh-16 item-summary" id="{{capability._id}}-collapse">
                              <p class="summary">{{{capability.data.snippet}}}</p>
                            </div>
                          {{else}}
                            {{#if (is true (getGameSetting "openByDefault"))}}
                              <div class="collapse in readable lh-16 item-summary" id="{{capability._id}}-collapse">
                                <p class="summary">{{{capability.data.effect}}}</p>
                              </div>
                            {{else}}
                              <div class="collapse readable lh-16 item-summary" id="{{capability._id}}-collapse">
                                <p class="summary">{{{capability.data.effect}}}</p>
                              </div>
                            {{/if}}
                          {{/if}}
                        </li>
                        {{/each}}
                      </ol>
                    </ol> --}}
                  </div>
                </div>
              </div>
              <div class="col">
                <!-- Poké Edges-->
                <div class="swsh-box mt-2 w-100">
                  <div class="swsh-body w-100" style="display: block;">
                    {{> item-display title="Poké Edges" type="pokeedge" data=actor.edges}}
                    {{!-- <ol class="inventory-list">
                      <li class="inventory-header flexrow">
                        <h3 class="item-name flexrow">Poké Edges</h3>
                        <div class="item-controls">
                          <a class="item-control item-create" title="Add pokeedge" data-type="pokeedge"><i
                              class="fas fa-plus-circle" style="margin-right: 3px;"></i><span
                              class="readable">Add</span></a>
                        </div>
                      </li>
                      <ol class="item-list">
                        {{#each actor.edges as | pokeedge |}}
                        <li class="item flexrow" data-item-id="{{pokeedge._id}}">
                          <div class="item-name flexrow">
                            <h4 title="Toggle Info ({{pokeedge.name}})" data-toggle="collapse"
                              data-target="#{{pokeedge._id}}-collapse" aria-expanded="false"
                              aria-controls="{{pokeedge._id}}-collapse">
                              <i class="fas fa-info-circle info-icon"></i>
                              {{pokeedge.name}}
                            </h4>
                          </div>
                          <div class="item-controls" style="flex: 0 0 55px; justify-content: center; display:flex;">
                            <a class="item-control item-edit" title="Edit pokeedge"><i class="fas fa-edit"></i></a>
                            <a class="item-control item-delete" title="Delete pokeedge"><i class="fas fa-trash"></i></a>
                          </div>
                          {{#if pokeedge.data.snippet}}
                            <div class="collapse in readable lh-16 item-summary" id="{{pokeedge._id}}-collapse">
                              <p class="summary">{{{pokeedge.data.snippet}}}</p>
                            </div>
                          {{else}}
                            {{#if (is true (getGameSetting "openByDefault"))}}
                              <div class="collapse in readable lh-16 item-summary" id="{{pokeedge._id}}-collapse">
                                <p class="summary">{{{pokeedge.data.effect}}}</p>
                              </div>
                            {{else}}
                              <div class="collapse readable lh-16 item-summary" id="{{pokeedge._id}}-collapse">
                                <p class="summary">{{{pokeedge.data.effect}}}</p>
                              </div>
                            {{/if}}
                          {{/if}}
                        </li>
                        {{/each}}
                      </ol>
                    </ol> --}}
                  </div>
                </div>

                <!-- Tutor Points -->
                {{#if (is "true" (getGameSetting "useTutorPoints"))}}
                <div class="swsh-box mt-2" style="text-align: center;">
                  <div class="swsh-header">
                    <h3 class="m-auto">Tutor Points</h3>
                  </div>
                  <div class="swsh-body">
                    <div class="resource-content flexrow flex-group-right hp-info w-100">
                      <input type="text" name="data.tp.value" value="{{data.tp.value}}" data-dtype="Number"/>
                      <span> / </span>
                      <input type="text" name="data.tp.max" value="{{data.tp.max}}" data-dtype="Number" disabled/>
                    </div>
                  </div>
                </div>
                {{else}}
                <div class="swsh-box mt-2" style="text-align: center;">
                  <div class="swsh-header">
                    <h3 class="m-auto">PokéEdge Points Used:</h3>
                  </div>
                  <div class="swsh-body">
                    <div class="resource-content flexrow flex-group-right hp-info w-100">
                      <input type="text" {{#if (gt data.tp.pep.value data.tp.pep.max)}}class="error-text"{{/if}} name="data.tp.pep.value" value="{{data.tp.pep.value}}" data-dtype="Number" disabled/>
                      <span> / </span>
                      <input type="text" name="data.tp.pep.max" value="{{data.tp.pep.max}}" data-dtype="Number" disabled/>
                    </div>
                  </div>
                </div>
                {{/if}}
              </div>
            </div>
          </div>

          <!-- Combat Tab -->
          <div class="tab details combat" data-group="primary" data-tab="combat">
            <div class="row">
              <div class="col">
                <!-- Evasion -->
                <div class="swsh-box mb-2 w-100" style="text-align: center; word-break: keep-all;">
                  <div class="swsh-header">
                    <div class="d-flex w-100 mt-1 mb-1 align-items-center">
                      <div class="col-sm-4">
                        <label for="data.evasion.physical">Physical<br>Evasion</label>
                      </div>
                      <div class="col-sm-4">
                        <label for="data.evasion.special">Special<br>Evasion</label>
                      </div>
                      <div class="col-sm-4">
                        <label for="data.evasion.speed">Speed<br>Evasion</label>
                      </div>
                    </div>
                  </div>
                  <div class="swsh-body" style="display: block;">
                    <div class="d-flex w-100 mt-1 mb-1">
                      <div class="col-sm-4">
                        <input type="text" name="data.evasion.physical" value="{{data.evasion.physical}}" data-dtype="Number"
                          disabled />
                      </div>
                      <div class="col-sm-4">
                        <input type="text" name="data.evasion.special" value="{{data.evasion.special}}" data-dtype="Number"
                          disabled />
                      </div>
                      <div class="col-sm-4">
                        <input type="text" name="data.evasion.speed" value="{{data.evasion.speed}}" data-dtype="Number"
                          disabled />
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Injuries -->
                <div class="swsh-box mb-2 w-100" style="text-align: center; word-break: keep-all;">
                  <div class="swsh-header">
                    <div class="d-flex w-100 mt-1 mb-1 align-items-center">
                      <div class="col-sm-4">
                        <label for="data.health.injuries">Injuries</label>
                      </div>
                      <div class="col-sm-3">
                        <label for="data.modifiers.hardened">Hardened</label>
                      </div>
                      <div class="col-sm-5">
                        <label for="data.health.total">Total Health<br><small>Ignoring Injuries</small></label>
                      </div>
                    </div>
                  </div>
                  <div class="swsh-body" style="display: block;">
                    <div class="d-flex w-100 mt-1 mb-1">
                      <div class="col-sm-4">
                        <input name="data.health.injuries" type="text" value="{{data.health.injuries}}"
                          data-dtype="Number" />
                      </div>
                      <div class="col-sm-3">
                        <input name="data.modifiers.hardened" type="checkbox" {{checked data.modifiers.hardened}} />
                      </div>
                      <div class="col-sm-5">
                        <input type="text" name="data.health.total" value="{{data.health.total}}" data-dtype="Number"
                          disabled />
                      </div>
                    </div>
                    {{#if (or (bigger data.health.injuries 0) (is true data.modifiers.hardened))}}
                    <div class="d-flex w-100 mt-1 mb-1">
                      <ul style="position: relative; left: 15px; width: 96%; line-height: 15px; text-align: start;">
                        {{#if data.modifiers.hardened}}<li>Injuries beyond the 5th do not lower Maximum Hit Points</li>
                        {{/if}}
                        {{#if (and (is true data.modifiers.hardened) (biggerOrEqual data.health.injuries 1))}}<li>+1 to
                          Critical Hit and Effect Range</li>{{/if}}
                        {{#if (and (is true data.modifiers.hardened) (biggerOrEqual data.health.injuries 3))}}<li>+1
                          Evasion and +5 Initiative</li>{{/if}}
                        {{#if (biggerOrEqual data.health.injuries 5)}}<li>Unable to regain Hit Points from Resting</li>
                        {{/if}}
                        {{#if (and (is true data.modifiers.hardened) (biggerOrEqual data.health.injuries 5))}}<li>+5
                          Damage Reduction</li>{{/if}}
                        {{#if (and (not true data.modifiers.hardened) (biggerOrEqual data.health.injuries 5))}}<li>Take
                          {{data.health.injuries}} Damage whenever taking a Standard Action during Combat</li>{{/if}}
                        {{#if (and (is true data.modifiers.hardened) (biggerOrEqual data.health.injuries 7))}}<li>Immune
                          to Loss of Hit Points (but not damage) from all effects</li>{{/if}}
                        {{#if (and (is true data.modifiers.hardened) (biggerOrEqual data.health.injuries 9))}}<li>Resist
                          all damage one step further</li>{{/if}}
                        {{#if (and (not true data.modifiers.hardened) (biggerOrEqual data.health.injuries 10))}}<li>
                          <b>Death</b></li>{{/if}}
                        </ol>
                    </div>
                    {{/if}}
                  </div>
                </div>

                <!-- Training + Save Checks -->
                <div class="d-flex mb-2 w-100">
                  <div class="col-sm-8" style="padding-left: unset;">
                    <div class="swsh-box w-100 h-100" style="text-align: center; word-break: keep-all;">
                      <div class="swsh-header" style="height: 40px;">
                        <div class="d-flex w-100 mt-1 mb-1 align-items-center">
                          <div class="col-sm-6">
                            <label for="data.training">Training</label>
                          </div>
                          <div class="col-sm-3">
                            <label for="data.training.trained">Trained</label>
                          </div>
                          <div class="col-sm-3">
                            <label for="data.training.ordered">Ordered</label>
                          </div>
                        </div>
                      </div>
                      <div class="swsh-body" style="display: block;">
                        {{#each data.training as |training key|}}
                          <div class="d-flex w-100 mt-1 mb-1">
                            <div class="col-sm-6" style="padding: unset;">
                              <p>{{capitalizeFirst key}} Training</p>
                            </div>
                            <div class="col-sm-3">
                              <input name="data.training.{{key}}.trained" type="checkbox" {{checked training.trained}} />
                            </div>
                            <div class="col-sm-3">
                              <input name="data.training.{{key}}.ordered" type="checkbox" {{checked training.ordered}} />
                            </div>
                          </div>
                        {{/each}}
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-4" style="padding-right: unset;">
                    <div class="swsh-box d-flex flex-column w-100 h-100" style="text-align: center; word-break: keep-all;">
                      <div class="swsh-header" style="height: 51px;">
                        <div class="d-flex w-100 mt-1 mb-1 align-items-center">
                          <div class="col-sm-12">
                            <label for="data.modifiers.saveChecks">Save Checks Modifier</label>
                          </div>
                        </div>
                      </div>
                      <div class="swsh-body d-flex flex-column h-100" style="display: block;">
                        <div class="d-flex w-100 mt-auto mb-auto">
                          <div class="col-sm-12">
                            <input name="data.modifiers.saveChecks" type="text" value="{{data.modifiers.saveChecks}}" data-dtype="Number" />
                          </div>
                        </div>
                        <div class="d-flex w-100 mt-auto mb-auto">
                          <div class="col-sm-12">
                            <button class="btn rollable save">Make Save</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                
              </div>
              <div class="col">
                <div class="swsh-box mt-auto w-100" style="text-align: center;">
                  <!-- Item Effect -->
                  <div class="swsh-header">
                    <h3 class="m-auto">Item Effect</h3>
                  </div>
                  <div class="swsh-body w-100">
                    <textarea style="min-height: 100px;" id="itemDescription"
                      disabled>{{itemDescription data.heldItem}}</textarea>
                  </div>
                  <!-- Digestion Buff -->
                  <div class="swsh-header">
                    <div class="d-flex w-100 mt-1 mb-1">
                      <div class="col">
                        <label for="data.digestionBuff">Digestion Buff</label>
                      </div>
                    </div>
                  </div>
                  <div class="swsh-body">
                    <div class="d-flex w-100 mt-1 mb-1">
                      <div class="col">
                        <input id="digestionBuffInput" type="text" name="data.digestionBuff" value="{{data.digestionBuff}}" />
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Vitamins -->

                <!-- Digestion Buff -->

                <!-- Likes & Dislikes -->

                <!-- Tick/HP Guidelines -->
                <div class="swsh-box w-100 mt-2 mb-2" style="text-align: center;">
                  <div class="swsh-header">
                    <div class="d-flex w-100 mt-1" style="font-size: 13px; justify-content: center;">
                      <h3>HP Guidelines</h3>
                    </div>
                  </div>
                  <div class="swsh-header">
                    <div class="d-flex w-100 mb-1" style="align-items: flex-end;">
                      <div class="col-sm-2">
                        <label for="1/16th">1/16th</label>
                      </div>
                      <div class="col-sm-2">
                        <label for="1/10th">Tick 1/10th</label>
                      </div>
                    <div class="col-sm-2">
                        <label for="1/8th">1/8th</label>
                      </div><div class="col-sm-2">
                        <label for="3/10th">3/10th</label>
                      </div><div class="col-sm-2">
                        <label for="1/4th">1/4th</label>
                      </div><div class="col-sm-2">
                        <label for="1/2nd">1/2nd</label>
                      </div></div>
                  </div>
                  <div class="swsh-body">
                    <div class="d-flex w-100 mt-1 mb-1">
                      <div class="col-sm-2">
                        <input disabled name="1/16th" type="text" value="{{floor (divide data.health.total 16)}}" data-dtype="Number">
                      </div>
                      <div class="col-sm-2">
                        <input disabled name="1/10th" type="text" value="{{floor (divide data.health.total 10)}}" data-dtype="Number">
                      </div>
                      <div class="col-sm-2">
                        <input disabled name="1/8th" type="text" value="{{floor (divide data.health.total 8)}}" data-dtype="Number">
                      </div>
                      <div class="col-sm-2">
                        <input disabled name="3/10th" type="text" value="{{floor (multiply data.health.total (divide 3 10))}}" data-dtype="Number">
                      </div>
                      <div class="col-sm-2">
                        <input disabled name="1/4th" type="text" value="{{floor (divide data.health.total 4)}}" data-dtype="Number">
                      </div>
                      <div class="col-sm-2">
                        <input disabled name="1/2nd" type="text" value="{{floor (divide data.health.total 2)}}" data-dtype="Number">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Extra Tab -->
          <div class="tab details extra" data-group="primary" data-tab="extra">
            <div class="row">
              <div class="col">
                <!-- Species + Gender + Owner -->
                <div class="swsh-box mb-2 w-100" style="text-align: center; word-break: keep-all;">
                  <div class="swsh-header">
                    <div class="d-flex w-100 mt-1 mb-1 align-items-center">
                      <div class="col-sm-4">
                        <label for="data.species">Species</label>
                      </div>
                      <div class="col-sm-4">
                        <label for="data.gender">Gender</label>
                      </div>
                      <div class="col-sm-4">
                        <label for="data.owner">Owner</label>
                      </div>
                    </div>
                  </div>
                  <div class="swsh-body" style="display: block;">
                    <div class="d-flex w-100 mt-1 mb-1">
                      <div class="col-sm-4">
                        <input type="text" name="data.species" value="{{data.species}}" data-dtype="String"/>
                      </div>
                      <div class="col-sm-4">
                        <input type="text" name="data.gender" value="{{data.gender}}" data-dtype="String"/>
                      </div>
                      <div class="col-sm-4">
                        {{#select data.owner}}
                            <select name="data.owner">
                              {{#each owners as | actor |}}
                              <option value="{{actor._id}}">{{actor.name}}</option>
                              {{/each}}
                            </select>
                        {{/select}}
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Egg Group -->
                <div class="swsh-box mb-2 w-100" style="text-align: center; word-break: keep-all;">
                  <div class="swsh-header">
                    <div class="d-flex w-100 mt-1 mb-1 align-items-center">
                      <div class="col-sm-8">
                        <label for="data.egggroup">Egg Group</label>
                      </div>
                      <div class="col-sm-4">
                        <label for="data.owner">Shiny</label>
                      </div>
                    </div>
                  </div>
                  <div class="swsh-body" style="display: block;">
                    <div class="d-flex w-100 mt-1 mb-1">
                      <div class="col-sm-8">
                        <input type="text" name="data.egggroup" value="{{data.egggroup}}" data-dtype="String"
                          disabled />
                      </div>
                      <div class="col-sm-4">
                          <input name="data.shiny" type="checkbox" {{checked data.shiny}} />
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Modifiers -->
                <div class="swsh-box w-100 mb-2" style="text-align: center; word-break: keep-all;">
                  <div class="swsh-header">
                    <div class="d-flex w-100 mt-1 mb-1" style="font-size: 13px; justify-content: center;">
                      <h3>Modifiers</h3>
                    </div>
                  </div>
                  <div class="swsh-header">
                    <div class="d-flex w-100 mt-1 mb-1">
                      <div class="col-sm-6">
                        <label for="data.modifiers.initiative">Initiative Mod</label>
                      </div>
                      <div class="col-sm-6">
                        <label for="data.modifiers.statPoints">Stat Point Mod</label>
                      </div>
                    </div>
                  </div>
                  <div class="swsh-body">
                    <div class="d-flex w-100 mt-1 mb-1">
                      <div class="col-sm-6">
                        <input name="data.modifiers.initiative" type="text" value="{{data.modifiers.initiative}}"
                          data-dtype="Number" />
                      </div>
                      <div class="col-sm-6">
                        <input type="text" name="data.modifiers.statPoints" value="{{data.modifiers.statPoints}}"
                          data-dtype="Number" />
                      </div>
                    </div>
                  </div>
                  <div class="swsh-header pt-1">
                    <div class="d-flex w-100 mt-1 mb-1">
                      <div class="col-sm-6">
                        <label for="data.modifiers.acBonus">Accuracy Bonus</label>
                      </div>
                      <div class="col-sm-6">
                        <label for="data.modifiers.critRange">Crit Range Bonus</label>
                      </div>
                    </div>
                  </div>
                  <div class="swsh-body">
                    <div class="d-flex w-100 mt-1 mb-1">
                      <div class="col-sm-6">
                        <input type="text" name="data.modifiers.acBonus" value="{{data.modifiers.acBonus}}"
                          data-dtype="Number" />
                      </div>
                      <div class="col-sm-6">
                        <input type="text" name="data.modifiers.critRange" value="{{data.modifiers.critRange}}"
                          data-dtype="Number" />
                      </div>
                    </div>
                  </div>
                  <div class="swsh-header pt-1">
                    <div class="d-flex w-100 mt-1 mb-1">
                      <div class="col-sm-4">
                        <label for="data.modifiers.evasion.physical">Phys Eva Bonus</label>
                      </div>
                      <div class="col-sm-4">
                        <label for="data.modifiers.evasion.special">Spec Eva Bonus</label>
                      </div>
                      <div class="col-sm-4">
                        <label for="data.modifiers.evasion.speed">Spd Eva Bonus</label>
                      </div>
                    </div>
                  </div>
                  <div class="swsh-body">
                    <div class="d-flex w-100 mt-1 mb-1">
                      <div class="col-sm-4">
                        <input type="text" name="data.modifiers.evasion.physical" value="{{data.modifiers.evasion.physical}}"
                          data-dtype="Number" />
                      </div>
                      <div class="col-sm-4">
                        <input type="text" name="data.modifiers.evasion.special" value="{{data.modifiers.evasion.special}}"
                          data-dtype="Number" />
                      </div>
                      <div class="col-sm-4">
                        <input type="text" name="data.modifiers.evasion.speed" value="{{data.modifiers.evasion.speed}}"
                          data-dtype="Number" />
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Skill Background -->
                <div class="swsh-box w-100 mb-2" style="text-align: center;">
                  <div class="swsh-header">
                    <div class="d-flex w-100 mt-1 mb-1" style="font-size: 13px; justify-content: center;">
                        <h3>Skill Background</h3>
                    </div>
                  </div>
                  <div class="swsh-header">
                    <div class="d-flex w-100 mt-1 mb-1">
                      <div class="col-sm-4">
                        <label for="data.background.increased.one">Skill up 1:</label>
                      </div>
                      <div class="col-sm-4">
                        <label for="data.background.increased.two">Skill up 2:</label>
                      </div>
                      <div class="col-sm-4">
                        <label for="data.background.increased.three">Skill up 3:</label>
                      </div>
                    </div>
                  </div>
                  <div class="swsh-body">
                    <div class="d-flex w-100 mt-1 mb-1 fs-9">
                      <div class="col-sm-4">
                        {{#select data.background.increased.one}}
                        <select name="data.background.increased.one">
                          <option value="blank">None</option>
                          {{#each skills as | skill key |}}
                          <option value="{{key}}">{{skill.label}}</option>
                          {{/each}}
                        </select>
                        {{/select}}
                      </div>
                      <div class="col-sm-4">
                        {{#select data.background.increased.two}}
                        <select name="data.background.increased.two">
                          <option value="blank">None</option>
                          {{#each skills as | skill key |}}
                          <option value="{{key}}">{{skill.label}}</option>
                          {{/each}}
                        </select>
                        {{/select}}
                      </div>
                      <div class="col-sm-4">
                        {{#select data.background.increased.three}}
                        <select name="data.background.increased.three">
                          <option value="blank">None</option>
                          {{#each skills as | skill key |}}
                          <option value="{{key}}">{{skill.label}}</option>
                          {{/each}}
                        </select>
                        {{/select}}
                      </div>
                    </div>
                  </div>
                  <div class="swsh-header">
                    <div class="d-flex w-100 mt-1 mb-1">
                      <div class="col-sm-4">
                        <label for="data.background.decreased.one">Skill down 1:</label>
                      </div>
                      <div class="col-sm-4">
                        <label for="data.background.decreased.two">Skill down 2:</label>
                      </div>
                      <div class="col-sm-4">
                        <label for="data.background.decreased.three">Skill down 3:</label>
                      </div>
                    </div>
                  </div>
                  <div class="swsh-body">
                    <div class="d-flex w-100 mt-1 mb-1 fs-9">
                      <div class="col-sm-4">
                        {{#select data.background.decreased.one}}
                        <select name="data.background.decreased.one">
                          <option value="blank">None</option>
                          {{#each skills as | skill key |}}
                          <option value="{{key}}">{{skill.label}}</option>
                          {{/each}}
                        </select>
                        {{/select}}
                      </div>
                      <div class="col-sm-4">
                        {{#select data.background.decreased.two}}
                        <select name="data.background.decreased.two">
                          <option value="blank">None</option>
                          {{#each skills as | skill key |}}
                          <option value="{{key}}">{{skill.label}}</option>
                          {{/each}}
                        </select>
                        {{/select}}
                      </div>
                      <div class="col-sm-4">
                        {{#select data.background.decreased.three}}
                        <select name="data.background.decreased.three">
                          <option value="blank">None</option>
                          {{#each skills as | skill key |}}
                          <option value="{{key}}">{{skill.label}}</option>
                          {{/each}}
                        </select>
                        {{/select}}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col">
                <!-- Skills -->
                  <div class="swsh-box mt-auto w-100 mb-2">
                    <div class="swsh-header skill skill-block">
                      <div class="row no-gutters header w-100">
                        <div class="col-sm-4 pt-2 pb-2">Skill</div>
                        <div class="col mt-2 mb-2">Mod</div>
                        <div class="col-sm-3 mt-2 mb-2">Rank</div>
                        <div class="col-sm-2 mt-2 mb-2">Value</div>
                        <div class="col mt-2 mb-2">Dice</div>
                      </div>
                    </div>
                    <div class="swsh-body p-0">
                      <div class="w-100 skills skill-block">
                        {{#each data.skills as |skill key|}}
                        <div class="row no-gutters {{key}} align-items-center">
                          <div class="skill {{key}} col-sm-4 bgcolor key type--{{skill.type}} align-self-center">
                            <label for="data.skills.{{key}}.modifier" class="resource-label">{{skill.label}}</label>
                          </div>
                          <div class="skill {{key}} col pl-1 pr-1 fs-9 center-text">
                            <input type="text" name="data.skills.{{key}}.modifier" value="{{skill.modifier}}" data-dtype="Number" disabled/>
                          </div>
                          <div class="skill {{key}} col-sm-3 align-self-center bgcolor skill--{{skill.rank}} center-text">
                            <label for="data.skills.{{key}}.value" class="resource-label">{{skill.rank}}</label>
                          </div>
                          <div class="skill {{key}} col pl-1 fs-9 center-text">
                            <input type="text" name="data.skills.{{key}}.value" value="{{skill.value}}"
                              data-dtype="Number" disabled/>
                          </div>
                          <div class="skill {{key}} col-sm-2 align-self-center bgcolor fs-9 center-text rollable"
                            data-roll="{{skill.value}}d6{{#if skill.modifier}}+{{skill.modifier}}{{/if}}"
                            data-label="{{skill.label}}">
                            <i class="fas fa-dice-d20"></i>
                            <label for="data.skills.{{key}}.value"
                              class="resource-label">{{skill.value}}d6{{#if skill.modifier}}+{{skill.modifier}}{{/if}}</label>
                          </div>
                        </div>
                        {{/each}}
                      </div>
                    </div>
                  </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="sheet-footer">
    <div class="tabs">
      <ul class="sheet-tabs tabs buttons" data-group="primary">
        <li><button class="item" data-tab="stats">Stats</button></li>
        <li><button class="item" data-tab="moves">Moves</button></li>
        <li><button class="item" data-tab="capability">Capabilities</button></li>
        <li><button class="item" data-tab="combat">Combat</button></li>
        <li><button class="item" data-tab="extra">Extra</button></li>
      </ul>
    </div>
  </div>
</form>